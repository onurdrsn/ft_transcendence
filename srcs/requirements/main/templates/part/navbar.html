{% load i18n %}
{% load static %}
<nav class="navbar navbar-expand-lg border border-top-0 rounded-xl">
    <div class="container-fluid">
        <a class="fs-3 navbar-brand" href="/">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
                <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"></path>
            </svg>
            {% trans 'Home' %}
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="nav">
            <ul class="navbar-nav me-auto mb-lg-0">
                {% if request.user.is_authenticated %}
                    <li class="nav-item m-auto">
                        <a class="fs-3 btn" href="{% url 'chat:private_chat_room' %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
                                <path d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"></path>
                            </svg>
                            {% trans 'Chat' %}
                        </a>
                    </li>
                    <li class="nav-item m-auto">
                    <div class="dropstart m-auto btn-group">
                        <button type="button" class="fs-3 btn orange" data-bs-toggle="dropdown" aria-expanded="false">
                            {% trans "Games" %}</button>
                            <ul class="dropdown-menu">
                                <li class="nav-item m-auto"><a class="px-4 btn orange" href="{% url 'tictac:tictac_create' %}">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="18" width="18" viewBox="0 0 455.896 455.896" fill="currentColor">
                                        <path d="M432.458,330.806c8.794,0,15.926-7.132,15.926-15.926c0-8.794-7.132-15.926-15.926-15.926H331.599V155.62h100.859
                                            c8.794,0,15.926-7.132,15.926-15.926c0-8.794-7.132-15.926-15.926-15.926H331.599V22.909c0-8.796-7.132-15.926-15.926-15.926
                                            c-8.796,0-15.926,7.13-15.926,15.926v100.859H156.414V22.902c0-8.794-7.132-15.926-15.926-15.926
                                            c-8.796,0-15.926,7.132-15.926,15.926v100.867H23.695c-8.794,0-15.926,7.132-15.926,15.926c0,8.794,7.132,15.926,15.926,15.926
                                            h100.867v143.333H23.695c-8.794,0-15.926,7.132-15.926,15.926c0,8.794,7.132,15.926,15.926,15.926h100.867v100.859
                                            c0,8.796,7.13,15.926,15.926,15.926c8.794,0,15.926-7.13,15.926-15.926V330.806h143.333v100.867c0,8.794,7.13,15.926,15.926,15.926
                                            c8.794,0,15.926-7.132,15.926-15.926V330.806H432.458z M156.414,298.954V155.62h143.333v143.333H156.414z"></path>
                                        <path d="M27.652,106.497l25.235-25.241l25.235,25.241c3.11,3.11,7.184,4.666,11.26,4.666c4.075,0,8.149-1.556,11.26-4.666
                                            c6.222-6.213,6.222-16.299,0-22.519L75.408,58.735l25.233-25.243c6.222-6.221,6.222-16.306,0-22.519
                                            c-6.221-6.221-16.299-6.221-22.519,0L52.887,36.214L27.652,10.973c-6.221-6.221-16.299-6.221-22.519,0
                                            c-6.222,6.213-6.222,16.299,0,22.519l25.233,25.243L5.133,83.977c-6.222,6.221-6.222,16.307,0,22.519
                                            c3.11,3.11,7.184,4.666,11.26,4.666C20.468,111.163,24.542,109.607,27.652,106.497z"></path>
                                        <path d="M250.596,227.287l25.235-25.243c6.221-6.221,6.221-16.307,0-22.519c-6.222-6.222-16.3-6.222-22.521,0l-25.235,25.241
                                            l-25.235-25.241c-6.221-6.222-16.299-6.222-22.519,0c-6.221,6.213-6.221,16.299,0,22.519l25.235,25.243l-25.235,25.243
                                            c-6.221,6.221-6.221,16.307,0,22.519c3.11,3.11,7.186,4.666,11.26,4.666c4.075,0,8.149-1.556,11.26-4.666l25.235-25.241
                                            l25.235,25.241c3.11,3.11,7.186,4.666,11.26,4.666c4.076,0,8.149-1.556,11.261-4.666c6.221-6.213,6.221-16.299,0-22.519
                                            L250.596,227.287z"></path>
                                        <path d="M228.072,117.47c32.389,0,58.735-26.346,58.735-58.735C286.807,26.346,260.461,0,228.072,0
                                            c-32.389,0-58.735,26.346-58.735,58.735C169.337,91.123,195.684,117.47,228.072,117.47z M228.072,31.852
                                            c14.822,0,26.883,12.061,26.883,26.883c0,14.822-12.061,26.883-26.883,26.883c-14.822,0-26.883-12.061-26.883-26.883
                                            C201.189,43.913,213.25,31.852,228.072,31.852z"></path>
                                        </svg>
                                    Tic Tac Toe
                                </a></li>
							<li class="nav-item m-auto"><a class="nav-link px-4 active" href="{% url 'pong:home' %}">
                                <svg fill="currentColor" height="18" width="18" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                viewBox="0 0 345.134 345.134" xml:space="preserve">
                                    <path d="M62.549,252.369c-9.506,0-18.442,3.701-25.164,10.423c-13.874,13.875-13.874,36.452,0,50.327
                                        c6.722,6.721,15.658,10.422,25.164,10.422s18.442-3.702,25.163-10.422c6.721-6.721,10.423-15.658,10.423-25.164
                                        c0-9.505-3.702-18.442-10.423-25.163S72.055,252.369,62.549,252.369z M74.984,300.391c-3.321,3.321-7.737,5.15-12.435,5.15
                                        c-4.698,0-9.114-1.829-12.436-5.15c-6.856-6.857-6.856-18.014,0-24.871c3.321-3.322,7.737-5.151,12.436-5.151
                                        c4.697,0,9.113,1.829,12.435,5.15c3.322,3.322,5.151,7.738,5.151,12.436C80.135,292.653,78.306,297.069,74.984,300.391z"></path>
                                    <path d="M318.144,274.188c-0.21-7.501-3.541-14.67-9.136-19.67l-52.374-46.799c3.393-3.516,6.552-7.243,9.456-11.16
                                        c0.618-0.631,1.141-1.352,1.553-2.142c13.073-18.52,20.587-40.958,20.587-64.543c0-29.765-12.02-62.442-32.152-87.412
                                        C233.999,15.081,205.654,0,176.263,0c-25.543,0-50.292,11.395-70.828,32.351c-17.977,3.975-33.666,12.256-45.911,24.5
                                        c-20.782,20.783-30.162,51.489-26.411,86.463c3.421,31.892,18.027,63.498,39.074,84.544c19.245,19.246,44.48,30.343,70.581,32.386
                                        l-3.145,55.938c-0.422,7.492,2.293,14.917,7.448,20.37c5.155,5.453,12.416,8.581,19.921,8.581h18.541
                                        c7.504,0,14.765-3.127,19.92-8.581c5.155-5.453,7.87-12.878,7.448-20.37l-3.564-63.404l47.854,53.555
                                        c5,5.596,12.169,8.926,19.671,9.137c0.254,0.007,0.506,0.011,0.759,0.011c7.235,0,14.268-2.902,19.395-8.029l13.11-13.11
                                        C315.433,289.036,318.355,281.69,318.144,274.188z M277.367,297.478c-2.613-0.074-5.012-1.188-6.754-3.137l-47.936-53.646
                                        c-5.366-6.005-12.813-9.207-20.429-9.207c-3.877,0-7.799,0.83-11.512,2.542c-11.226,5.178-23.144,7.96-35.07,8.481l89.517-89.517
                                        c-0.521,11.926-3.303,23.844-8.482,35.07c-5.076,11.006-2.397,23.842,6.665,31.94l53.646,47.936
                                        c1.95,1.742,3.063,4.141,3.138,6.754c0.073,2.614-0.904,5.072-2.754,6.92l-13.11,13.11
                                        C282.439,296.573,279.981,297.552,277.367,297.478z M157.594,317.193l3.203-56.98c10.334-0.85,20.618-3.146,30.541-6.93
                                        l3.593,63.911c0.146,2.61-0.762,5.094-2.559,6.994c-1.796,1.9-4.225,2.946-6.839,2.946h-18.541c-2.614,0-5.044-1.046-6.841-2.947
                                        C158.356,322.287,157.447,319.803,157.594,317.193z M72.252,69.579c16.857-16.857,42.365-24.397,71.816-21.243
                                        c27.938,2.997,55.502,15.671,73.735,33.905c13.173,13.173,21.79,29.694,25.456,47.222L134.234,238.489
                                        c-0.663,0.663-1.2,1.404-1.613,2.193c-17.708-3.607-34.412-12.257-47.705-25.551c-18.234-18.234-30.909-45.799-33.905-73.736
                                        C47.851,111.941,55.395,86.436,72.252,69.579z M242.066,53.761c17.636,21.873,28.164,50.327,28.164,76.113
                                        c0,14.016-3.173,27.544-8.912,39.77c2.333-12.385,2.54-25.007,0.712-37.323c-0.009-0.883-0.149-1.762-0.416-2.612
                                        c-3.852-22.34-14.405-43.519-31.081-60.196c-21.047-21.047-52.652-35.654-84.544-39.074c-3.016-0.323-5.997-0.542-8.946-0.671
                                        C149.446,22.066,162.779,18,176.263,18C200.103,18,223.472,30.7,242.066,53.761z"></path>
                                    </svg>
                                Ping Pong
                            </a></li>
                            </ul>
                    </div>
                </li>
                {% endif %}
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item p-2 m-auto">
                    {% get_current_language as LANGUAGE_CODE %}
                    {% get_available_languages as LANGUAGES %}
                    {% get_language_info_list for LANGUAGES as languages %}
                    <form action="{% url 'set_language' %}" method="post" id="languageForm">{% csrf_token %}
                        <select style="color: goldenrod; border-color: darkgray; box-shadow: 0 0 0.6rem darkgray inset, 0 0 0.5rem darkgray;" class="form-select form-select-sm" name="language" required>
                            <option selected disabled>{% trans 'Language' %}</option>
                            {% get_language_info_list for LANGUAGES as languages %}
                            {% for lang in languages %}
                                <option value="{{ lang.code }}" {% if lang.code == LANGUAGE_CODE %}selected{% endif %}>
                                    {% trans lang.name %} ({{ lang.code }})
                                </option>
                            {% endfor %}
                        </select>
                    </form>
                </li>
                {% if request.user.is_authenticated %}
                    <!-- PROFILE -->
                    <li class="navbar-item p-2 m-auto">
                        <form class="search-bar justify-content-start" onsubmit="return executeQuery();">
			                <label><input type="text" class="shadow-lg form-control" name="q" id="id_q_small" placeholder="{% trans 'Search' %}"></label>
		                </form>
                    </li>
                    <li class="nav-item p-2 m-auto">
                        <div class="btn-group dropstart">
                            <img class="account-image m-auto rounded-circle d-block dropdown-toggle" id="profile_links" data-bs-toggle="dropdown"
                			  alt="logo" width="40" height="40" src="{{ request.user.profile_image.url }}"
                			 aria-labelledby="profile_links" aria-haspopup="true" aria-expanded="false">
                		    <div class="dropdown-menu">
                			    <a class="fs-4 dropdown-item" href="{% url 'account:account_view' user_id=request.user.pk %}">{% trans 'Account' %}</a>
                			    <a class="fs-4 dropdown-item" href="{% url 'account:logout' %}">{% trans 'Logout' %}</a>
                		    </div>
                        </div>
                    </li>
                {% else %}
                    <li class="nav-item p-2 m-auto">
                        <a class="fs-5 btn btn-bd-primary" href="{% url 'account:login' %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-door-open" viewBox="0 0 16 16">
                                <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"></path>
                                <path d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117M11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z"></path>
                            </svg>
                            {% trans 'Login' %}
                        </a>
                    </li>
                    <li class="nav-item p-2 m-auto">
                        <a class="fs-5 btn btn-bd-primary" href="{% url 'account:register' %}">{% trans 'Sign Up' %}</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<script>
	function executeQuery() {
	    window.location.replace("{% url 'account:search' %}?q=" +  document.getElementById("id_q_small").value);
	    return false;
    }
</script>
